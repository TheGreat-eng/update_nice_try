# File: /mosquitto/config/mosquitto.conf

# === Listeners ===
# Listener cho kết nối MQTT thông thường
listener 1883
protocol mqtt

# Listener cho kết nối MQTT qua WebSockets (cho các client web)
listener 9001
protocol websockets

# === Authentication ===
# Cho phép kết nối ẩn danh. Quan trọng cho môi trường development.
allow_anonymous true

# === Persistence ===
# Bật lưu trữ để giữ lại các message retained và session
persistence true
persistence_location /mosquitto/data/

# === Logging ===
# Ghi log ra console để có thể xem bằng `docker-compose logs`
log_dest stdout
log_type all